webpackJsonp([22],{253:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(436),i=o.n(r);for(var l in r)"default"!==l&&function(e){o.d(t,e,function(){return r[e]})}(l);var a=o(502),s=o.n(a),n=o(4),u=n(i.a,s.a,!1,null,null,null);u.options.__file="src\\views\\reptile-tool\\book.vue",t.default=u.exports},436:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(17),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default={name:"book",components:{},data:function(){var e=this;return{bookName:"",loading:!1,columns:[{title:"标题",key:"title",render:function(e,t){return e("div",[e("span",t.row.title),e("span",{attrs:{style:"color:red"}},"("+t.row.status+")")])}},{title:"作者",key:"author"},{title:"爬取地址",key:"url",render:function(e,t){return e("a",{attrs:{href:t.row.url,target:"_blank"}},t.row.url)}},{title:"爬取",key:"",render:function(t,o){return t("a",{attrs:{href:"javascript:void(0);",id:o.row.title+"_"+o.row.author},on:{click:function(){e.onClickReptileTool(o)}}},o.row.reptile)}}],list:[],reptileType:0,placeholder:"请输入您想爬取的小说名",reptileList:i.default.reptileList,flag:!1,isProxy:!0}},computed:{},methods:{onClickSearch:function(){var e=this;if(this.bookName&&this.bookName.trim()&&!this.loading){localStorage.bookName=this.bookName,localStorage.reptileType=this.reptileType,localStorage.isProxy=this.isProxy,this.$router.replace("/reptile-tool/book?bookName="+this.bookName+"&reptileType="+this.reptileType+"&isProxy="+this.isProxy);var t={params:{bookName:this.bookName,reptileType:this.reptileType,isProxy:this.isProxy}};this.loading=!0,i.default.post.reptile.getUrl(t,{timeout:1e4}).then(function(t){e.list=t,e.loading=!1}).catch(function(t){e.loading=!1})}},onClickReptileTool:function(e){var t=document.getElementById(e.row.title+"_"+e.row.author).innerHTML;if("已获取"!=t&&"正在获取中"!=t){document.getElementById(e.row.title+"_"+e.row.author).innerHTML="正在获取中";var o={params:{bookName:e.row.title,bookUrl:e.row.url,author:e.row.author,reptileType:this.reptileType}};i.default.post.reptile.getBookJson(o).then(function(t){document.getElementById(e.row.title+"_"+e.row.author).innerHTML="已获取"}).catch(function(t){document.getElementById(e.row.title+"_"+e.row.author).innerHTML="获取失败"})}},selectChange:function(e){this.flag,this.flag=!1,this.list=[],this.changePlaceHolder(e)},changePlaceHolder:function(e){var t=0,o=this.reptileList.length;for(t;t<o;t++){var r=this.reptileList[t];if(e==r.id){this.placeholder=r.placeholder;break}}}},created:function(){this.reptileType=parseInt(this.$route.query.reptileType||localStorage.reptileType)||0},mounted:function(){},activated:function(){this.bookName2="",this.$route.query.bookName?this.bookName2=this.$route.query.bookName:localStorage.bookName&&(this.bookName2=localStorage.bookName),this.reptileType2=this.reptileType,this.$route.query.reptileType?this.reptileType2=parseInt(this.$route.query.reptileType):localStorage.reptileType&&(this.reptileType2=parseInt(localStorage.reptileType)),this.isProxy2=this.isProxy,this.$route.query.isProxy?this.isProxy2="true"==this.$route.query.isProxy:localStorage.isProxy&&(this.isProxy2="true"==localStorage.isProxy),this.bookName==this.bookName2&&this.reptileType==this.reptileType2||(this.flag=!0,this.reptileType=this.reptileType2,this.bookName=this.bookName2,this.isProxy=this.isProxy2,this.onClickSearch())},deactivated:function(){}}},502:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("Layout",[o("Card",[o("Row",[o("Col",{attrs:{span:"20"}},[o("Select",{staticClass:"w150",attrs:{placeholder:""},on:{"on-change":e.selectChange},model:{value:e.reptileType,callback:function(t){e.reptileType=t},expression:"reptileType"}},e._l(e.reptileList,function(t){return o("Option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.remark))])})),e._v(" "),o("Input",{staticClass:"w200",attrs:{placeholder:e.placeholder,clearable:""},nativeOn:{keyup:function(t){return"button"in t||13===t.keyCode?e.onClickSearch(t):null}},model:{value:e.bookName,callback:function(t){e.bookName=t},expression:"bookName"}})],1),e._v(" "),o("Col",{staticClass:"tr",attrs:{span:"4"}},[o("span",[e._v("启用代理搜索：")]),e._v(" "),o("i-switch",{staticClass:"mr20",attrs:{disabled:e.loading},model:{value:e.isProxy,callback:function(t){e.isProxy=t},expression:"isProxy"}}),e._v(" "),o("Button",{attrs:{type:"primary"},on:{click:e.onClickSearch}},[e._v("搜索")])],1)],1)],1),e._v(" "),o("Card",{attrs:{shadow:""}},[o("Table",{ref:"table",attrs:{border:"","highlight-row":"",loading:e.loading,columns:e.columns,data:e.list}})],1)],1)},i=[];r._withStripped=!0;var l={render:r,staticRenderFns:i};t.default=l}});